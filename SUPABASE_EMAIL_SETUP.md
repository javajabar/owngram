# Настройка Email в Supabase

## Проблема: Email не приходит при регистрации

### Решение 1: Использовать ссылку подтверждения (РЕКОМЕНДУЕТСЯ)

По умолчанию Supabase отправляет email со **ссылкой подтверждения**. Это работает без дополнительных настроек:

1. При регистрации пользователь получает email
2. В email есть ссылка для подтверждения
3. Пользователь переходит по ссылке → аккаунт подтвержден
4. Пользователь может войти

**Это самый простой способ** - не требует настройки email провайдера.

### Решение 2: Настроить кастомный Email провайдер

Если хотите использовать свой email провайдер (Gmail, SendGrid, Mailgun и т.д.):

1. Зайдите в Supabase Dashboard
2. Перейдите в **Authentication → Settings → Email Templates**
3. Настройте шаблоны email (опционально)
4. Перейдите в **Settings → Auth → SMTP Settings**
5. Настройте SMTP провайдера:
   - **Gmail**: Используйте App Password
   - **SendGrid**: API Key
   - **Mailgun**: API Key
   - Или любой другой SMTP сервер

### Решение 3: Отключить требование подтверждения email (для тестирования)

Если нужно для тестирования:

1. Зайдите в Supabase Dashboard
2. **Authentication → Settings → Email Auth**
3. Отключите **"Confirm email"**
4. Теперь пользователи могут входить сразу после регистрации

⚠️ **Внимание:** Это только для разработки/тестирования. В продакшене лучше оставить подтверждение включенным.

### Решение 4: Использовать 6-значный код (требует настройки)

Если хотите использовать 6-значный код вместо ссылки:

1. Настройте кастомный email провайдер (см. Решение 2)
2. Измените email шаблон в Supabase:
   - **Authentication → Email Templates → Confirm signup**
   - Добавьте в шаблон код: `{{ .Token }}`
   - Или используйте переменную `{{ .Token }}` в нужном формате

### Проверка отправки email

1. Зайдите в Supabase Dashboard
2. **Authentication → Logs**
3. Проверьте логи отправки email
4. Если есть ошибки - проверьте настройки SMTP

### Частые проблемы:

- **Email в спаме**: Проверьте папку "Спам"
- **Email не отправляется**: Проверьте SMTP настройки
- **Ссылка не работает**: Проверьте `emailRedirectTo` в коде (должен быть правильный URL вашего сайта)

## Рекомендация

**Используйте ссылку подтверждения** - это работает из коробки и не требует дополнительных настроек. Пользователь просто переходит по ссылке из письма, и аккаунт подтверждается автоматически.



